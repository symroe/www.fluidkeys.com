<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <meta name="description" content="Implement Best Security Practices and Demonstrate Your Team’s Expertise With PGP. Sign Up Now!">
    <meta name="description" content="Fluidkeys makes it easy to implement the best security practices and demonstrate your team's expertise with PGP. Sign up now!" />
    <link href="../../stylesheets/blog.css" rel="stylesheet" />
  </head>
  <body>
    <header class="typeset">
      <h1>Fluidkeys</h1>
    </header>
    <section class="typeset blog">
        <h1>Week 2:</h1>

<p>Recap: Ian and I are building Fluidkeys, software that helps teams protect themselves with strong encryption. Fluidkeys builds on the OpenPGP standard and is compatible with other OpenPGP software.</p>

<h2>The short version</h2>

<p>This week we&#39;ve:</p>

<ul>
<li>  clarified our thinking about building new features versus improving PGP</li>
<li>  started building Fluidkeys, working towards v0.1.0 next week</li>
<li>  set up Jenkins for continuous deployment</li>
</ul>

<h2>End user features vs improving PGP</h2>

<p>We&#39;ve got lots of ideas for cool things Fluidkeys could do to help teams protect themselves.</p>

<p>Early in the week we confused ourselves about what we&#39;re trying to do… are we <strong>improving PGP</strong> or <strong>making end-user features</strong>?</p>

<p>For example, we&#39;re interested in integrating with Slack to allow sending end-to-end encrypted messages. What&#39;s that got to do with wrapping GnuPG or making a PGP key?</p>

<p>Here&#39;s what we realised:</p>

<ul>
<li>  To build features like protecting Slack messages with end to end encryption requires a <strong>public key distribution</strong> system (e.g. I want to encrypt this file to Nina, what public key should I use?)</li>
<li>  Email is a very popular <strong>identity system</strong>. It&#39;s decentralised, difficult to censor, and extremely well understood. Slack (and most other software) piggy-backs on email as its identity system.</li>
<li>  <a href="https://tools.ietf.org/html/rfc4880">OpenPGP is an open standard</a> which can link an identifier like an <strong>email address</strong> to a <strong>public key.</strong> This can be a foundation for a <strong>public key distribution</strong> system.</li>
<li>  We need to make OpenPGP usable as a foundation for Fluidkeys to build more offer useful end-to-end encryption features.</li>
</ul>

<p>With that realisation, we can separate features into two classes:</p>

<ol>
<li> Features which make OpenPGP easier to use, such as:

<ol>
<li> <strong>make a new PGP key</strong> according to best practice</li>
<li> <strong>make a &quot;strong&quot; password</strong> and keep it safe</li>
<li> <strong>backup your PGP key</strong> in case you lose it</li>
<li> <strong>publish your PGP somewhere</strong> on the internet</li>
<li> <strong>automatically find your team&#39;s keys</strong> and keep them updated</li>
<li> <strong>automatically rotate and upgrade</strong> your keys</li>
</ol></li>
<li> Features which build on top of OpenPGP as a foundation, such as:

<ol>
<li> <strong>send huge files to your team-mates</strong> with end-to-end encryption and integrity checking (current workaround: password protected ZIP files, send the password via WhatsApp, hope the file didn&#39;t get corrupted)</li>
<li> <strong>send encrypted messages via Slack</strong> while transparently end-to-end encryptiong and decrypting them the other side</li>
<li> <strong>quickly share a password to another team-mate</strong></li>
</ol></li>
</ol>

<h2>Improving usability of PGP with Fluidkeys v0.1.0</h2>

<p>With that in mind, we started working towards our first mini-release of Fluidkeys. The aim of version 0.1.0 is simple:</p>

<p><strong>&quot;Make a best-practice PGP key that I can use with GnuPG&quot;</strong></p>

<p>This release is aimed at developers and sysadmins, and we wanted to tackle these specific usability issues in other software:</p>

<h3>People don&#39;t know how to answer questions about cryptography</h3>

<p>It&#39;s just silly to expect non-cryptographers to tell you what key size they want, so we don&#39;t ask them. We deferred to <a href="https://infosec.mozilla.org/guidelines/key_management.html">Mozilla&#39;s Infosec team&#39;s key management guidance</a> and went with a 4096-bit RSA key.</p>

<p>As a usability principle, we plan to ask as few questions as possible, and be opinionated with (strong) defaults instead. (Hypothesis: teams will defer to our expertise over their own — we&#39;ll have to earn this credibility.)</p>

<h3>People don&#39;t know what&#39;s meant by a &quot;strong password&quot;, and we aren&#39;t good at inventing passwords</h3>

<p>It&#39;s a heavy mental burden to be asked to come up with a new password, <strong>and</strong> decide what&#39;s meant by &quot;secure&quot;.</p>

<p>We&#39;ve tried to side-step both issues by <strong>just</strong> <strong>making a password for them</strong>. We&#39;ve used the <a href="http://world.std.com/%7Ereinhold/diceware.html">6-word Diceware technique</a> with <a href="https://www.eff.org/deeplinks/2016/07/new-wordlists-random-passphrases">EFF&#39;s wordlist</a> which provides a number of usability improvements. It generates relatively memorable passwords like this:</p>

<p><code>shindig.fernlike.primarily.rind.denim.cake</code></p>

<p>We&#39;ve also dropped the word &quot;passphrase&quot; because… WTF.</p>

<h3>People make a password, then forget it and lose access to their key.</h3>

<p>We took some inspiration from Bitcoin wallets here which use an intriguing design pattern.</p>

<p>After presenting the password, we ask them to put it in their password manager or write it on a piece of paper and keep it on them. We ask them to hit enter once they&#39;ve recorded it.</p>

<p>Then we clear the screen, and ask for one of the words from the password. If they type in the word correctly, we assume they did write it down.</p>

<p>If they get it wrong, we give them another chance to write it down before bailing out.</p>

<p>This isn&#39;t infallible — I suspect people might just paste the password into a text editor and subsequently lose it. But at least they can&#39;t copy-paste the whole password, since they need to give a single word.</p>

<p>Hopefully with time and testing we&#39;ll figure out how to make this bit as reliable as possible.</p>

<h3>It&#39;s boring waiting 30s or more for a 4096-bit RSA key to be generated.</h3>

<p>Having chosen to generate 4096-bit keys, we made the user experience worse by introducing a potentially long delay. (It takes a lot of entropy to securely generate a 4096-bit key, and computers generate entropy quite slowly from sources like mouse movements and hard disk timings).</p>

<p>The solution&#39;s obvious: do it in the background!</p>

<p>Fluidkeys asks the person to write down their password and come back when they&#39;re done, so we use that dead-time to generate the key behind the scenes.</p>

<h3>People don&#39;t back up their PGP key</h3>

<p>Understandably, because it&#39;s complicated and boring. Most of us never quite get round to making a backup until it&#39;s too late.</p>

<p>Again, we just do it automatically. Fluidkeys makes a ZIP file with a sensible name and saves it to your <code>~/.fluidkeys/</code> directory.</p>

<p>Inside the ZIP file, it looks like this:</p>

<pre><code>fluidkeys-2018-08-17-paul-paulfurley-com.zip
├── 2018-08-17-paul-paulfurley-com.private-encrypted.txt
├── 2018-08-17-paul-paulfurley-com.public.txt
├── 2018-08-17-paul-paulfurley-com.revoke.txt
└── README.txt
</code></pre>

<h2>Set up Jenkins for continuous deployment</h2>

<p>We wanted v0.1.0 to be properly <em>releasable</em>, and that meant packaging it properly from the start. We took some upfront effort to properly package Fluidkeys for macOS and Debian/Ubuntu:</p>

<h3>Install with homebrew</h3>

<pre><code>brew tap fluidkeys/tap \
brew install fluidkeys
</code></pre>

<h3>Install with apt</h3>

<pre><code>sudo apt-key adv --keyserver pool.sks-keyservers.net --recv-key 0x36D46F41F57A1DF676730BE4EA53212450A89809

sudo apt update \
sudo apt install fluidkeys
</code></pre>

<h3>We&#39;re signing commits and releases</h3>

<p>To set an example, we&#39;re signing (almost) all our commits on Github, and we&#39;re strictly signing releases as version tags</p>

<p>When Jenkins prepares to build a new DEB package and Homebrew formula, it gets the most recent tag and check that it&#39;s properly signed by me or Ian, and blows up if not.</p>

<p>Finally, Jenkins has its own automatic signing key which it uses to sign the apt repo.</p>

<p>It&#39;s not infallible, but it protects against attacks on Github accounts like the one recently suffered by <a href="https://gentoo.org/news/2018/06/28/Github-gentoo-org-hacked.html">Gentoo</a>.</p>

<h2>We&#39;d appreciate your feedback</h2>

<p>Fluidkeys v0.1.0 is <em>furiously minimal</em>, but we&#39;d really appreciate your thoughts on what we&#39;ve built so far.</p>

<p>If you&#39;d like to test drive it, head over to <a href="https://github.com/fluidkeys/fluidkeys.com">Github</a> and follow the install instructions there.</p>

<p><em>All</em> feedback is welcome, pop us an email to <a href="mailto:paul@paulfurley.com">paul@paulfurley.com</a> and <a href="mailto:idrysdale@gmail.com">idrysdale@gmail.com</a></p>

<p>— Paul</p>

  <hr />
  <a href="/blog">Back to all posts</a>

    </section>
    <script>
  var dnt = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
  if (dnt != "1" && dnt != "yes") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-121440356-1', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  } else {
    console.debug("Respecting Do-Not-Track, not loading analytics. See https://www.paulfurley.com/google-analytics-dnt/");
  }
</script>
  </body>
</html>
